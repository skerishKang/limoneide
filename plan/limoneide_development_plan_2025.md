# 🍋 LimoneIDE 실행 개발 계획서 (Phase 2: App Engine 기반 구축)

- **문서 버전:** 2.0
- **작성일:** 2025년 6월 25일
- **작성자:** CEO / Project Lead
- **상태:** ✅ **개발 착수 준비 완료**

## **1. 프로젝트 배경 및 목표**

### **배경**
초기 LimoneIDE는 'AI 텔레그램 봇'과 'Google Drive'를 활용한 '클라우드 IDE'라는 아이디어에서 출발했습니다. 그러나 실제 동작하는 웹 서비스를 만들기 위해 '서버'의 필요성을 인지했고, Google Sites를 거쳐 최종적으로 **Google App Engine**이라는 최적의 해결책에 도달했습니다.

최근(2024년 6월 24일), 우리는 이 새로운 전략에 맞춰 대대적인 코드 리팩토링을 단행했습니다. 모든 핵심 모듈을 200줄 이하로 유지하고, 기능별 폴더 구조를 최적화하여 **깨끗하고 안정적인 코드 기반을 확보**했습니다.

### **목표**
이제 이 견고한 토대 위에서, **"사용자가 음성으로 명령하면, AI가 코드를 생성하여 실제 동작하는 웹 애플리케이션을 App Engine에 자동으로 배포하는"** 핵심 MVP(Minimum Viable Product) 파이프라인을 구축하는 것을 목표로 합니다.

이 계획서는 그 목표를 달성하기 위한 구체적인 실행 로드맵입니다.

---

## **2. 핵심 기술 전략: Google App Engine 자동화**

우리는 Google Cloud가 공식적으로 제공하는 API를 활용하여, 사용자의 개입을 최소화하는 완전 자동화 플로우를 구현합니다.

*   **End-to-End 사용자 경험 플로우:**
    1.  **로그인:** 사용자는 LimoneIDE에 **'Google 계정으로 로그인'** 버튼 하나만 클릭합니다.
    2.  **권한 동의:** 최초 1회, LimoneIDE가 클라우드 리소스를 관리할 수 있도록 **권한을 위임**합니다.
    3.  **결제 계정 연결:** 구글 정책에 따라, 최초 1회 사용자가 직접 **결제 계정을 연결**하도록 명확히 안내합니다.
    4.  **음성 명령:** 사용자는 "케이크 쇼핑몰 만들어줘"와 같이 음성으로 명령합니다.
    5.  **완성:** 30초~1분 내에 실제 동작하는 HTTPS URL을 제공받습니다.

*   **백엔드 자동화 플로우:**
    1.  **인증 (OAuth 2.0):** 사용자로부터 위임받은 권한 토큰을 안전하게 획득합니다.
    2.  **프로젝트 생성 (Cloud Resource Manager API):** 사용자 계정 하위에 신규 Google Cloud 프로젝트를 자동으로 생성합니다.
    3.  **배포 (App Engine Admin API):** AI가 생성한 코드를 해당 프로젝트의 App Engine에 자동으로 배포합니다.
    4.  **데이터베이스 (Cloud SQL Admin API):** 필요시 Cloud SQL 데이터베이스 인스턴스를 자동으로 생성하고 App Engine과 연결합니다.

---

## **3. 개발 로드맵 (4-Sprint Plan)**

이제부터 2주 단위의 스프린트를 통해 가시적인 성과를 만들어 나갑니다.

### **Sprint 0: 준비 (완료)**
*   **목표:** 견고한 개발 기반 확보
*   **완료된 작업:**
    *   핵심 모듈 리팩토링 완료 (200줄 이하 유지)
    *   AI 엔진, RAG 시스템, 템플릿 등 기능별 코드 분리 완료
    *   App Engine 기반 기술 전략 확정
    *   `tree.md`를 포함한 프로젝트 구조 문서화 완료

### **Sprint 1: 인증 및 프로젝트 생성 자동화 (2주)**
*   **목표:** 사용자가 구글 계정으로 로그인하고, LimoneIDE가 사용자 이름으로 GCP 프로젝트를 자동 생성할 수 있게 한다.
*   **주요 Task:**
    1.  **프론트엔드 (`LimoneIDE_Test`):** 'Google로 로그인' 버튼 UI 구현.
    2.  **백엔드 (`LimoneIDE_Backend`):**
        *   Google OAuth 2.0 인증 플로우 구현 (`automation/google_integration.py` 확장).
        *   획득한 인증 토큰을 안전하게 관리하는 로직 구현.
        *   Cloud Resource Manager API를 호출하여 새 GCP 프로젝트를 생성하는 함수 구현.
    3.  **연동:** 로그인 성공 시, 백엔드 API를 호출하여 사용자 계정에 `limoneide-project-xxxx` 와 같은 프로젝트가 생성되는 것을 확인.

### **Sprint 2: App Engine "Hello, World!" 배포 자동화 (2주)**
*   **목표:** Sprint 1에서 생성된 프로젝트에, 간단한 "Hello, World!" 웹 애플리케이션을 자동으로 배포할 수 있게 한다.
*   **주요 Task:**
    1.  **백엔드 (`LimoneIDE_Backend`):**
        *   `templates` 폴더에 "Hello, World"를 출력하는 가장 간단한 Python(FastAPI) 또는 Node.js 코드와 `app.yaml` 파일 템플릿 추가.
        *   `automation/deployment_manager.py`를 **App Engine 전용으로 리팩토링**.
        *   App Engine Admin API를 호출하여 지정된 프로젝트에 코드 템플릿을 배포하는 함수 구현.
    2.  **테스트:** 특정 사용자 계정으로 API를 호출했을 때, Sprint 1에서 만든 프로젝트에 "Hello, World" 사이트가 배포되고 실제 URL이 반환되는지 확인.

### **Sprint 3: 핵심 MVP 파이프라인 완성 (2주)**
*   **목표:** **"음성 명령 → AI 코드 생성 → App Engine 자동 배포"**의 전체 플로우를 연결한다.
*   **주요 Task:**
    1.  **통합 (`LimoneIDE_Backend`):**
        *   `voice/` 모듈과 `core/ai_*.py` 모듈, 그리고 `automation/deployment_manager.py`를 `main.py`에서 모두 연결.
        *   "쇼핑몰 만들어줘" 음성 명령이 들어오면, `templates/ecommerce_template.py`와 AI 엔진을 활용해 실제 쇼핑몰 코드를 생성.
        *   생성된 코드를 Sprint 2에서 만든 배포 함수에 전달하여 App Engine에 자동 배포.
    2.  **프론트엔드 (`LimoneIDE_Test`):** 음성 명령을 녹음하여 백엔드로 전송하고, 로딩 상태를 보여주다가 최종적으로 반환된 URL을 화면에 표시하는 UI 구현.

### **Sprint 4: 데이터베이스 연동 및 고도화 (2주)**
*   **목표:** 배포된 애플리케이션이 영구적인 데이터를 저장할 수 있도록 Cloud SQL을 연동한다.
*   **주요 Task:**
    1.  **백엔드 (`LimoneIDE_Backend`):**
        *   Cloud SQL Admin API를 사용하여 데이터베이스 인스턴스를 자동 생성하는 로직 추가 (`google_integration.py`).
        *   App Engine과 Cloud SQL이 안전하게 통신할 수 있도록 환경변수 및 접속 정보 자동 설정 로직 구현.
    2.  **코드 생성 고도화:** AI가 생성하는 웹사이트 코드에 '방명록'이나 '조회수 카운터'와 같이 데이터베이스를 사용하는 기능을 포함하도록 `templates` 및 AI 프롬프트 수정.

---

## **4. 리팩토링된 코드 활용 계획**

최근 완료된 리팩토링은 위 로드맵의 효율을 극대화할 것입니다.

*   **`core/ai_*.py`:** Sprint 3에서 다양한 AI 모델을 실험하며 최고 품질의 코드를 생성하는 엔진을 선택하는 데 사용됩니다. `ai_base.py` 덕분에 엔진 교체가 용이합니다.
*   **`templates/`:** Sprint 2의 "Hello, World" 배포부터 Sprint 3의 실제 웹사이트 생성까지, 각 단계별로 필요한 코드의 기반을 제공하여 AI의 작업 부담을 줄여줍니다.
*   **`automation/`:** Sprint 1, 2, 4에 걸쳐 `google_integration.py`와 `deployment_manager.py`는 이번 프로젝트의 핵심 자동화 로직을 담당하며 집중적으로 개발될 것입니다.
*   **`rag/`:** Sprint 4 이후, 사용자의 과거 프로젝트 기록(`project_history.py`)을 바탕으로 더 고도화된 웹사이트를 추천(`user_recommender.py`)하는 기능을 개발할 때 핵심적으로 사용됩니다.

---

## **5. 결론 및 다음 단계**

우리는 혼란스러웠던 탐색 단계를 끝내고, 명확한 기술적 방향과 잘 정돈된 코드 기반 위에서 새로운 시작을 맞이했습니다. 이 계획서는 단순한 목표가 아닌, 앞으로 8주간 우리가 만들어낼 구체적인 결과물에 대한 약속입니다.

**개발팀은 이 계획서를 바탕으로 즉시 Sprint 1에 착수해주시기 바랍니다.**

1.  **작업 분배:** Sprint 1의 주요 Task를 팀원들에게 분배합니다.
2.  **환경 설정:** 모든 팀원이 Google Cloud API를 테스트할 수 있는 개발 환경을 점검합니다.
3.  **실행:** 프론트엔드 로그인 UI 개발과 백엔드 OAuth 인증 로직 개발을 병렬로 시작합니다.

LimoneIDE의 진정한 잠재력을 실현할 시간입니다. 우리의 손으로 "주머니 속 AI 워크플레이스"를 현실로 만듭시다. 